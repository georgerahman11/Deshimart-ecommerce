!function(l,r,e){var i=l(document);(r=r||{}).updates=r.updates||{},r.updates.l10n=_.extend(r.updates.l10n,e.l10n||{}),r.updates.importDemo=function(e){var a=l('.demo-import[data-slug="'+e.slug+'"]');return i.find("body").hasClass("full-overlay-active")&&(a=l(".wp-full-overlay-header, .wp-full-overlay-footer").find(".demo-import")),e=_.extend({success:r.updates.importDemoSuccess,error:r.updates.importDemoError},e),a.addClass("updating-message"),a.parents(".theme").addClass("focus"),a.html()!==r.updates.l10n.importing&&a.data("originaltext",a.html()),a.text(r.updates.l10n.importing).attr("aria-label",r.updates.l10n.demoImportingLabel.replace("%s",a.data("name"))),r.a11y.speak(r.updates.l10n.importingMsg,"polite"),l('.install-theme-info, [data-slug="'+e.slug+'"]').removeClass("demo-import-failed").find(".notice.notice-error").remove(),i.trigger("wp-demo-importing",e),r.updates.ajax("import-demo",e)},r.updates.importDemoSuccess=function(e){var a,t=l(".wp-full-overlay-header, .wp-full-overlay-footer, [data-slug="+e.slug+"]");i.trigger("wp-demo-import-success",e),a=t.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",r.updates.l10n.demoImportedLabel.replace("%s",e.demoName)).text(r.updates.l10n.imported),r.a11y.speak(r.updates.l10n.importedMsg,"polite"),setTimeout(function(){e.previewUrl&&(a.siblings(".demo-preview").remove(),a.attr("target","_blank").attr("href",e.previewUrl).removeClass("demo-import updated-message disabled").addClass("live-preview").attr("aria-label",r.updates.l10n.livePreviewLabel.replace("%s",e.demoName)).text(r.updates.l10n.livePreview))},1e3)},r.updates.importDemoError=function(e){var a,t=r.updates.l10n.importFailed.replace("%s",e.errorMessage),s=r.updates.adminNotice({className:"update-message notice-error notice-alt",message:t});r.updates.isValidResponse(e,"import")&&(r.updates.maybeHandleCredentialError(e,"import-demo")||(i.find("body").hasClass("full-overlay-active")?(a=l('.demo-import[data-slug="'+e.slug+'"]'),l(".install-theme-info").prepend(s)):a=l('[data-slug="'+e.slug+'"]').removeClass("focus").addClass("demo-import-failed").append(s).find(".demo-import"),a.removeClass("updating-message").attr("aria-label",r.updates.l10n.demoImportFailedLabel.replace("%s",a.data("name"))).text(r.updates.l10n.importFailedShort),r.a11y.speak(t,"assertive"),i.trigger("wp-demo-import-error",e)))},r.updates.bulkInstallPlugin=function(e){var a=l('tr[data-slug="'+e.slug+'"]'),t=a.find(".plugin-status span");return e=_.extend({success:r.updates.bulkInstallPluginSuccess,error:r.updates.bulkInstallPluginError},e),t.html()!==r.updates.l10n.installing&&t.data("originaltext",t.html()),t.addClass("updating-message").attr("aria-label",r.updates.l10n.pluginInstallingLabel.replace("%s",a.data("name"))).text(r.updates.l10n.installing),r.a11y.speak(r.updates.l10n.installingMsg,"polite"),i.trigger("wp-plugin-bulk-installing",e),r.updates.ajax("install-required-plugin",e)},r.updates.bulkInstallPluginSuccess=function(e){l('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",r.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(r.updates.l10n.pluginInstalled),r.a11y.speak(r.updates.l10n.installedMsg,"polite"),i.trigger("wp-plugin-bulk-install-success",e)},r.updates.bulkInstallPluginError=function(e){var a,t=l('tr[data-slug="'+e.slug+'"]'),s=t.find(".plugin-status span");r.updates.isValidResponse(e,"install")&&(r.updates.maybeHandleCredentialError(e,"install-plugin")||(a=r.updates.l10n.installFailed.replace("%s",e.errorMessage),s.removeClass("updating-message").addClass("updated-message").attr("aria-label",r.updates.l10n.pluginInstallFailedLabel.replace("%s",t.data("name"))).text(r.updates.l10n.installFailedShort),r.a11y.speak(a,"assertive"),i.trigger("wp-plugin-bulk-install-error",e)))},r.updates.isValidResponse=function(e,a){var t,s=r.updates.l10n.unknownError;if(_.isObject(e)&&!_.isFunction(e.always))return!0;switch(_.isString(e)&&"-1"===e?s=r.updates.l10n.nonceError:_.isString(e)?s=e:"undefined"!=typeof e.readyState&&0===e.readyState?s=r.updates.l10n.connectionError:_.isString(e.statusText)&&(s=e.statusText+" "+r.updates.l10n.statusTextLink),a){case"import":t=r.updates.l10n.importFailed}return t=t.replace("%s",s),r.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.unescape(t)}),r.updates.ajaxLocked=!1,r.updates.queue=[],l(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").text(r.updates.l10n.importFailedShort),r.a11y.speak(t,"assertive"),!1},r.updates.queueChecker=function(){var e;if(!r.updates.ajaxLocked&&r.updates.queue.length){switch((e=r.updates.queue.shift()).action){case"import-demo":r.updates.importDemo(e.data);break;case"install-plugin":r.updates.bulkInstallPlugin(e.data)}i.trigger("wp-updates-queue-job",e)}}}(jQuery,window.wp,window._demoUpdatesSettings);